# ğŸ” GPS ìœ„ì¹˜ ì°¨ì´ ë¬¸ì œ í•´ê²° ê°€ì´ë“œ

## âœ… ì ìš©ëœ ë””ë²„ê·¸ ê¸°ëŠ¥

### 1ï¸âƒ£ GPS ì‹œë®¬ë ˆì´ì…˜ ëª¨ë“œ í™œì„±í™” âœ…
- **íŒŒì¼**: `src/pages/MapGamePageV2.jsx`
- **ì„¤ì •**: `simulationMode: true`
- **íš¨ê³¼**: GPS ì—†ì´ë„ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥ (ìë™ìœ¼ë¡œ ìœ„ì¹˜ ìƒì„±)

### 2ï¸âƒ£ ê±°ë¦¬ ì œí•œ ë¬´ì‹œ ëª¨ë“œ âœ…
- **íŒŒì¼**: `src/features/map-game-v2/core/GameManager.js`
- **ì„¤ì •**: `this.debugMode = true`
- **íš¨ê³¼**: ê±°ë¦¬ ìƒê´€ì—†ì´ ëª¨ë“  í”Œë ˆì´ì–´ ë Œë”ë§

### 3ï¸âƒ£ ì½˜ì†” ë””ë²„ê·¸ ë¡œê·¸ âœ…
- **íŒŒì¼**: `src/pages/MapGamePageV2.jsx` + `GameManager.js`
- **ë°±ì—”ë“œ**: `MultiplayerController.java`
- **íš¨ê³¼**: ì‹¤ì‹œê°„ ìœ„ì¹˜ ì •ë³´ ì¶œë ¥

---

## ğŸš€ í…ŒìŠ¤íŠ¸ ë°©ë²•

### Step 1ï¸âƒ£: ì„œë²„ ì‹œì‘

**ë°±ì—”ë“œ ì‹¤í–‰** (í„°ë¯¸ë„ 1)
```bash
cd backend
./gradlew bootRun
```
- ë¡œê·¸ì— `ğŸ“ [POSITION UPDATE]` ë©”ì‹œì§€ í™•ì¸ ê°€ëŠ¥

**í”„ë¡ íŠ¸ì—”ë“œ ì‹¤í–‰** (í„°ë¯¸ë„ 2)
```bash
npm start
```

### Step 2ï¸âƒ£: ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ ì—´ê¸°

```
F12 (ë˜ëŠ” ìš°í´ë¦­ > ê²€ì‚¬)
```

### Step 3ï¸âƒ£: ì§€ë„ í˜ì´ì§€ ì ‘ì†

```
http://localhost:3000/map-game
```

---

## ğŸ“ í™•ì¸í•  ë¡œê·¸

### ì½˜ì†” íƒ­ (F12)ì—ì„œ í™•ì¸

#### ì˜ˆìƒ ë¡œê·¸ 1: ìì‹ ì˜ ìœ„ì¹˜ (1ì´ˆë§ˆë‹¤)
```javascript
ğŸ“ [MY POSITION] {
  username: "user1",
  lngLat: { lng: -73.935242, lat: 40.73061 },
  worldPos: { x: 0, y: 0, z: 0 },
  heading: 1.234
}
```

#### ì˜ˆìƒ ë¡œê·¸ 2: ë‹¤ë¥¸ í”Œë ˆì´ì–´ ìœ„ì¹˜
```javascript
ğŸ“ [DEBUG] Player user2: distance=45.67m, pos=[-100.23, 0.00, -200.45]
```

#### ì˜ˆìƒ ë¡œê·¸ 3: ì›ê²© í”Œë ˆì´ì–´ ëª©ë¡
```javascript
ğŸ‘¥ [DEBUG] Remote Players: [
  {
    userId: "2",
    username: "user2",
    position: [-100.23, 0, -200.45],
    distance: 223.65
  }
]
```

---

## ğŸ”§ ì‹¤ì‹œê°„ ìœ„ì¹˜ í™•ì¸

### ìì‹ ì˜ ìœ„ì¹˜ í™•ì¸
1. ì½˜ì†” íƒ­ ì—´ê¸°
2. **1ì´ˆë§ˆë‹¤** ë‹¤ìŒì´ ë°˜ë³µë˜ëŠ”ì§€ í™•ì¸:
```javascript
ğŸ“ [MY POSITION] { ... }
```

### ë‹¤ë¥¸ í”Œë ˆì´ì–´ ìœ„ì¹˜ í™•ì¸
1. 2ê°œ ì´ìƒì˜ ë¸Œë¼ìš°ì €ì—ì„œ ë™ì‹œì— ì ‘ì†
2. ì½˜ì†”ì—ì„œ ë‹¤ìŒ í™•ì¸:
```javascript
ğŸ® Player joined: [ë‹¤ë¥¸ í”Œë ˆì´ì–´ ë‹‰ë„¤ì„]
ğŸ‘¥ [DEBUG] Remote Players: [...]
ğŸ“ [DEBUG] Player ...: distance=...
```

---

## ğŸ“Š ê±°ë¦¬ ê³„ì‚° í™•ì¸

### ê±°ë¦¬ ê³„ì‚° ê³µì‹
```
distance = âˆš((x1-x2)Â² + (z1-z2)Â²)
```

### ì˜ˆì‹œ
- í”Œë ˆì´ì–´ A ìœ„ì¹˜: [0, 0, 0]
- í”Œë ˆì´ì–´ B ìœ„ì¹˜: [30, 0, 40]
- ê±°ë¦¬ = âˆš(30Â² + 40Â²) = âˆš(900 + 1600) = âˆš2500 = **50m**

### ì½˜ì†”ì—ì„œ í™•ì¸
```javascript
ğŸ’¬ distance=50.00m
```

---

## ğŸ® í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

### ì‹œë‚˜ë¦¬ì˜¤ 1ï¸âƒ£: GPS ì‹œë®¬ë ˆì´ì…˜ í…ŒìŠ¤íŠ¸
**ëª©í‘œ**: ì‹¤ì œ GPS ì—†ì´ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥ í™•ì¸

```bash
# ì„¤ì • í™•ì¸
MapGamePageV2.jsx: simulationMode: true âœ…

# ì˜ˆìƒ ê²°ê³¼
- ìì‹ ì˜ ìœ„ì¹˜ê°€ ìë™ìœ¼ë¡œ ìƒì„±ë¨
- "ğŸ“ [MY POSITION]" ë¡œê·¸ 1ì´ˆë§ˆë‹¤ ì¶œë ¥
```

### ì‹œë‚˜ë¦¬ì˜¤ 2ï¸âƒ£: ê±°ë¦¬ ì œí•œ ë¬´ì‹œ í…ŒìŠ¤íŠ¸
**ëª©í‘œ**: ê±°ë¦¬ì™€ ìƒê´€ì—†ì´ ëª¨ë“  í”Œë ˆì´ì–´ í‘œì‹œ

```bash
# ì„¤ì • í™•ì¸
GameManager.js: this.debugMode = true âœ…

# ì˜ˆìƒ ê²°ê³¼
- "ğŸ“ [DEBUG] Player ..." ë¡œê·¸ì— ê±°ë¦¬ì™€ ìƒê´€ì—†ì´ ì¶œë ¥
- ëª¨ë“  í”Œë ˆì´ì–´ê°€ í™”ë©´ì— í‘œì‹œë¨
```

### ì‹œë‚˜ë¦¬ì˜¤ 3ï¸âƒ£: 2ëª… ë©€í‹°í”Œë ˆì´ì–´ í…ŒìŠ¤íŠ¸
**ì¤€ë¹„**: 
- ë¸Œë¼ìš°ì € 1: í”Œë ˆì´ì–´ A ë¡œê·¸ì¸
- ë¸Œë¼ìš°ì € 2: í”Œë ˆì´ì–´ B ë¡œê·¸ì¸

**í…ŒìŠ¤íŠ¸**:
```javascript
// ë¸Œë¼ìš°ì € 1 ì½˜ì†”ì—ì„œ
1. "ğŸ® Player joined: B" ì¶œë ¥ ëŒ€ê¸°
2. "ğŸ‘¥ [DEBUG] Remote Players: [B]" ì¶œë ¥ í™•ì¸
3. ìš°ì¸¡ 3D í™”ë©´ì—ì„œ Bì˜ ìºë¦­í„° í‘œì‹œ í™•ì¸
```

---

## ğŸ› ë¬¸ì œ í•´ê²°

### ë¬¸ì œ 1ï¸âƒ£: "ğŸ“ [MY POSITION]" ë¡œê·¸ê°€ ì•ˆ ë‚˜ì˜´
**ì›ì¸**: GPS ì´ˆê¸°í™” ì‹¤íŒ¨

**í•´ê²°**:
1. `simulationMode: true` í™•ì¸
2. ì½˜ì†”ì— ì—ëŸ¬ ë©”ì‹œì§€ í™•ì¸
3. í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨ (F5)

### ë¬¸ì œ 2ï¸âƒ£: ë‹¤ë¥¸ í”Œë ˆì´ì–´ê°€ ì•ˆ ë³´ì„
**ì›ì¸**: 
- WebSocket ì—°ê²° ì‹¤íŒ¨
- ê±°ë¦¬ê°€ ë„ˆë¬´ ë©€ì–´ì„œ í•„í„°ë¨ (debugMode í™•ì¸)

**í•´ê²°**:
1. ì½˜ì†”ì—ì„œ "ğŸ® Player joined" ë©”ì‹œì§€ í™•ì¸
2. `GameManager.js`ì—ì„œ `debugMode = true` í™•ì¸
3. Network íƒ­ì—ì„œ WS ì—°ê²° í™•ì¸

### ë¬¸ì œ 3ï¸âƒ£: ê±°ë¦¬ ê³„ì‚°ì´ ì˜ëª»ë¨
**í™•ì¸**:
1. ì½˜ì†”ì—ì„œ `distance=` ê°’ í™•ì¸
2. ë°±ì—”ë“œ ë¡œê·¸ì—ì„œ ìœ„ì¹˜ê°’ í™•ì¸
3. ì¢Œì¸¡ GPS ë§µì—ì„œ ì‹¤ì œ ìœ„ì¹˜ í™•ì¸

---

## ğŸ“‹ ì²´í¬ë¦¬ìŠ¤íŠ¸

### í”„ë¡ íŠ¸ì—”ë“œ ì„¤ì •
- [ ] `MapGamePageV2.jsx`ì—ì„œ `simulationMode: true` ì„¤ì •
- [ ] `GameManager.js`ì—ì„œ `debugMode = true` ì„¤ì •
- [ ] ì½˜ì†” ë¡œê·¸ í™•ì¸ ê°€ëŠ¥

### ë°±ì—”ë“œ ì„¤ì •
- [ ] ë°±ì—”ë“œ ì„œë²„ ì‹¤í–‰ ì¤‘
- [ ] `MultiplayerController`ì— ë¡œê·¸ ì¶”ê°€ë¨
- [ ] í„°ë¯¸ë„ì— "ğŸ“ [POSITION UPDATE]" ë¡œê·¸ í‘œì‹œ

### í…ŒìŠ¤íŠ¸ ì¤€ë¹„
- [ ] 2ê°œ ì´ìƒì˜ ë¸Œë¼ìš°ì € íƒ­/ì°½ ì¤€ë¹„
- [ ] ê°ê° ë‹¤ë¥¸ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸
- [ ] F12 ê°œë°œì ë„êµ¬ ì—´ì–´ë‘ 

---

## ğŸ” ë°±ì—”ë“œ ë¡œê·¸ í™•ì¸

### í„°ë¯¸ë„ì—ì„œ ë³´ì´ëŠ” ë¡œê·¸

```
ğŸ“ [POSITION UPDATE] userId=1, username=user1, pos=[0.00, 0.00, 0.00], heading=1.23
ğŸ“ [POSITION UPDATE] userId=2, username=user2, pos=[-100.23, 0.00, -200.45], heading=0.45
ğŸ“ [POSITION UPDATE] userId=1, username=user1, pos=[5.00, 0.00, 10.00], heading=1.25
...
```

### ë¡œê·¸ ë¶„ì„
- **userId**: í”Œë ˆì´ì–´ ID
- **username**: í”Œë ˆì´ì–´ ë‹‰ë„¤ì„
- **pos=[x, y, z]**: 3D ì›”ë“œ ì¢Œí‘œ
- **heading**: ë°”ë¼ë³´ëŠ” ê°ë„ (ë¼ë””ì•ˆ)

---

## ğŸ’¡ íŒ

### ìœ„ì¹˜ ì´ˆê¸°í™”ê°€ ì•ˆ ë  ë•Œ
```javascript
// ì½˜ì†”ì—ì„œ ì§ì ‘ ì‹¤í–‰
localStorage.clear(); // ìºì‹œ ì‚­ì œ
location.reload(); // í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨
```

### GPS ìœ„ì¹˜ë¥¼ ìˆ˜ë™ìœ¼ë¡œ ì„¤ì •í•˜ê³  ì‹¶ì„ ë•Œ
```javascript
// useMapGame ì˜µì…˜ì—ì„œ
const { ... } = useMapGame(canvasRef.current, {
  simulationMode: true,
  initialPosition: [40.7128, -74.0060], // New York
  ...
});
```

### ê±°ë¦¬ ì œí•œ ì„¤ì • ë³€ê²½
```javascript
// GameManager.js
this.remotePlayerDistance = 500; // 500më¡œ ë³€ê²½
// ë˜ëŠ”
this.remotePlayerDistance = Infinity; // ë¬´ì œí•œ
```

---

## ğŸ“ ì¶”ê°€ í™•ì¸ ì‚¬í•­

### WebSocket ì—°ê²° í™•ì¸
1. F12 > Network íƒ­
2. "WS" í•„í„° ì„ íƒ
3. `ws://localhost:8080/ws` ì—°ê²° í™•ì¸

### ë©”ì‹œì§€ ì†¡ìˆ˜ì‹  í™•ì¸
1. Network íƒ­ì—ì„œ WebSocket ì„ íƒ
2. "Messages" íƒ­ í´ë¦­
3. Sent/Received ë©”ì‹œì§€ í™•ì¸:
   - Sent: `/app/player.position` (1ì´ˆë§ˆë‹¤)
   - Received: `/topic/positions` (ë‹¤ë¥¸ í”Œë ˆì´ì–´)

---

**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸**: 2025-12-31
