📋 구현 전략

  1️⃣ 데이터베이스 설계

  -- 프로필 아이템 정의 테이블
  CREATE TABLE profile_items (
      id BIGINT PRIMARY KEY AUTO_INCREMENT,
      item_type VARCHAR(20) NOT NULL,  -- 'PROFILE' or 'OUTLINE'
      item_code VARCHAR(50) NOT NULL,  -- 'base-profile1', 'base-outline1', etc.
      item_name VARCHAR(100) NOT NULL, -- 표시 이름
      image_path VARCHAR(255) NOT NULL, -- '/resources/Profile/base-profile1.png'
      is_default BOOLEAN DEFAULT FALSE, -- 기본 제공 아이템
      unlock_condition_type VARCHAR(50), -- 'NONE', 'ACHIEVEMENT', 'LEVEL', 'POST_COUNT', etc.
      unlock_condition_value VARCHAR(255), -- 조건 값 (JSON 형태)
      display_order INT DEFAULT 0,
      created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
  );

  -- 사용자 보유 아이템 테이블
  CREATE TABLE user_profile_items (
      id BIGINT PRIMARY KEY AUTO_INCREMENT,
      user_id BIGINT NOT NULL,
      profile_item_id BIGINT NOT NULL,
      unlocked_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      FOREIGN KEY (user_id) REFERENCES users(id),
      FOREIGN KEY (profile_item_id) REFERENCES profile_items(id),
      UNIQUE KEY (user_id, profile_item_id)
  );

  -- 사용자 프로필에 선택된 아이템 추가 (User 테이블 확장)
  ALTER TABLE users ADD COLUMN selected_profile_id BIGINT;
  ALTER TABLE users ADD COLUMN selected_outline_id BIGINT;
  ALTER TABLE users ADD FOREIGN KEY (selected_profile_id) REFERENCES profile_items(id);
  ALTER TABLE users ADD FOREIGN KEY (selected_outline_id) REFERENCES profile_items(id);

  2️⃣ 백엔드 구조

  backend/
  ├── controller/
  │   ├── ProfileItemController.java    -- 프로필 아이템 관리 API
  │   └── AdminProfileController.java   -- 관리자용 아이템/조건 관리
  ├── service/
  │   ├── ProfileItemService.java       -- 아이템 잠금해제/선택 로직
  │   └── UnlockConditionService.java   -- 조건 체크 로직
  ├── model/
  │   ├── ProfileItem.java
  │   ├── UserProfileItem.java
  │   └── enums/
  │       ├── ItemType.java             -- PROFILE, OUTLINE
  │       └── UnlockConditionType.java  -- NONE, ACHIEVEMENT, LEVEL, etc.
  ├── dto/
  │   ├── ProfileItemDto.java
  │   └── UnlockConditionDto.java
  └── repository/
      ├── ProfileItemRepository.java
      └── UserProfileItemRepository.java

  3️⃣ 주요 API 엔드포인트

  사용자용:
  - GET /api/profile/items - 사용자가 보유한 아이템 목록
  - GET /api/profile/items/available - 사용자가 잠금해제 가능한 아이템
  - POST /api/profile/items/{itemId}/unlock - 아이템 잠금해제
  - PUT /api/profile/select - 프로필/테두리 선택
  - GET /api/users/{userId}/profile - 다른 사용자 프로필 조회

  관리자용:
  - GET /api/admin/profile-items - 모든 아이템 조회
  - POST /api/admin/profile-items - 새 아이템 추가
  - PUT /api/admin/profile-items/{id} - 아이템 정보/조건 수정
  - DELETE /api/admin/profile-items/{id} - 아이템 삭제
  - GET /api/admin/unlock-conditions - 잠금해제 조건 타입 목록

  4️⃣ 프론트엔드 구조

  src/
  ├── features/
  │   ├── profile/
  │   │   ├── components/
  │   │   │   ├── ProfileModal.jsx          -- 기존 (수정)
  │   │   │   ├── ProfileCustomizer.jsx     -- 프로필/테두리 선택 UI
  │   │   │   ├── ProfileItemCard.jsx       -- 아이템 카드 컴포넌트
  │   │   │   └── ProfileDisplay.jsx        -- 프로필+테두리 렌더링
  │   │   └── services/
  │   │       └── profileItemService.js     -- API 호출
  │   └── admin/
  │       └── pages/
  │           └── ProfileItemManager.jsx    -- 관리자 아이템 관리 페이지
  └── components/
      └── ProfileAvatar.jsx                 -- 재사용 가능한 프로필 표시 컴포넌트

  5️⃣ 잠금해제 조건 타입 예시

  // UnlockConditionType enum
  {
    NONE: "기본 제공",
    LEVEL: "레벨 달성",
    POST_COUNT: "게시글 수",
    COMMENT_COUNT: "댓글 수",
    FRIEND_COUNT: "친구 수",
    LOGIN_DAYS: "연속 로그인 일수",
    ACHIEVEMENT: "특정 업적 달성",
    CUSTOM: "커스텀 조건"
  }

  // 조건 값 JSON 예시
  {
    "type": "LEVEL",
    "value": 10,
    "description": "레벨 10 달성"
  }

  {
    "type": "POST_COUNT",
    "value": 50,
    "description": "게시글 50개 작성"
  }

  6️⃣ 관리자 페이지 UI 구성

  시스템 > 프로필 아이템 관리
  ├── 아이템 목록 테이블
  │   ├── ID, 타입, 이름, 이미지 미리보기
  │   ├── 잠금해제 조건, 기본 제공 여부
  │   └── 수정/삭제 버튼
  ├── 아이템 추가/수정 모달
  │   ├── 아이템 타입 선택 (프로필/테두리)
  │   ├── 아이템 코드 입력
  │   ├── 이미지 경로 입력 (또는 업로드)
  │   ├── 조건 타입 선택
  │   └── 조건 값 입력
  └── 통계
      ├── 총 아이템 수
      └── 사용자별 잠금해제 통계

  7️⃣ 초기 데이터 설정 (DataInitializer)

  // 기본 프로필/테두리 자동 생성
  - base-profile1, 2, 3 (is_default = true)
  - base-outline1, 2, 3 (is_default = true)
  - base-outline4, 5, 6 (unlock_condition 설정)

  ---
  🎯 구현 단계 제안

  1. Phase 1: 기본 구조
    - DB 마이그레이션
    - 엔티티 및 레포지토리 생성
    - 기본 CRUD API
  2. Phase 2: 사용자 기능
    - 프로필 선택 UI
    - 아이템 잠금해제 로직
    - 프로필 표시 컴포넌트
  3. Phase 3: 관리자 기능
    - 관리자 페이지 UI
    - 조건 관리 시스템
  4. Phase 4: 확장
    - 업적 시스템 연동
    - 알림 기능
    - 통계 및 분석

  이렇게 구현하면 확장 가능하고 유지보수하기 쉬운 시스템이 됩니다. 어떤 단계부터 시작할까요?




    백엔드 기본 구조가 모두 완성되었습니다. 정리하면:

  생성된 파일들:

  Enums:
  - ItemType.java - 프로필/테두리 타입
  - UnlockConditionType.java - 잠금해제 조건 타입

  Entities:
  - ProfileItem.java - 프로필 아이템 정의
  - UserProfileItem.java - 사용자 보유 아이템
  - User.java (수정) - 선택된 프로필/테두리 필드 추가

  Repositories:
  - ProfileItemRepository.java
  - UserProfileItemRepository.java

  DTOs:
  - ProfileItemDto.java
  - UnlockConditionDto.java
  - ProfileSelectionDto.java

  Services:
  - ProfileItemService.java - 아이템 관리 로직

  Controllers:
  - ProfileItemController.java - 사용자용 API
  - AdminProfileController.java - 관리자용 API

  Configuration:
  - DataInitializer.java (수정) - 기본 아이템 자동 생성

  API 엔드포인트:

  사용자용:
  - GET /api/profile/items - 모든 아이템 조회
  - GET /api/profile/items/{type} - 타입별 아이템 조회
  - POST /api/profile/items/{itemId}/unlock - 아이템 잠금해제
  - PUT /api/profile/select - 프로필/테두리 선택

  관리자용:
  - GET /api/admin/profile-items - 모든 아이템 조회
  - POST /api/admin/profile-items - 아이템 생성
  - PUT /api/admin/profile-items/{id} - 아이템 수정
  - DELETE /api/admin/profile-items/{id} - 아이템 삭제
  - GET /api/admin/profile-items/unlock-conditions - 조건 타입 목록




   Phase 3 완료!

  관리자 페이지 구현이 완료되었습니다!

  ---
  🎉 전체 구현 완료 요약

  Phase 1: 백엔드 기본 구조 ✅

  Enums:
  - ItemType.java - PROFILE, OUTLINE
  - UnlockConditionType.java - NONE, LEVEL, POST_COUNT, COMMENT_COUNT, FRIEND_COUNT, LOGIN_DAYS, ACHIEVEMENT, CUSTOM

  Entities:
  - ProfileItem.java - 프로필 아이템 정의
  - UserProfileItem.java - 사용자 보유 아이템
  - User.java - selectedProfile, selectedOutline 필드 추가

  Repositories:
  - ProfileItemRepository.java
  - UserProfileItemRepository.java

  DTOs:
  - ProfileItemDto.java
  - UnlockConditionDto.java
  - ProfileSelectionDto.java
  - UserDto.java - 프로필 정보 포함

  Services:
  - ProfileItemService.java - 아이템 관리 로직

  Controllers:
  - ProfileItemController.java - 사용자 API
  - AdminProfileController.java - 관리자 API

  초기 데이터:
  - DataInitializer.java - 기본 프로필/테두리 자동 생성 및 지급

  ---
  Phase 2: 프론트엔드 사용자 기능 ✅

  Services:
  - profileItemService.js - 프로필 아이템 API 호출

  Components:
  - ProfileAvatar.jsx + CSS - 프로필+테두리 표시
  - ProfileCustomizer.jsx + CSS - 프로필 커스터마이징 UI
  - ProfileModal.jsx (수정) - "프로필 꾸미기" 버튼 추가

  기능:
  - 프로필 이미지와 테두리 선택
  - 잠금된 아이템 표시 (조건 표시)
  - 미리보기 기능
  - 잠금해제 시도

  ---
  Phase 3: 관리자 페이지 ✅

  Services:
  - adminProfileService.js - 관리자 API 호출

  Components:
  - ProfileItemManager.jsx + CSS - 아이템 관리 페이지
  - ItemFormModal.jsx + CSS - 아이템 추가/수정 모달

  기능:
  - 모든 프로필 아이템 조회 (테이블)
  - 아이템 생성/수정/삭제
  - 잠금해제 조건 설정
  - 통계 카드 (전체/프로필/테두리/기본 아이템 수)
  - 필터링 (전체/프로필/테두리)

  라우팅:
  - /admin/profile-items - 관리자 메뉴에 추가

  ---
  📊 구현된 기능

  사용자 기능:

  1. ✅ 기본 프로필 이미지 3개 선택
  2. ✅ 기본 테두리 3개 선택
  3. ✅ 잠금된 테두리 3개 표시 (조건 포함)
  4. ✅ 프로필 + 테두리 조합 미리보기
  5. ✅ 선택 저장

  관리자 기능:

  1. ✅ 새 프로필/테두리 아이템 추가
  2. ✅ 아이템 정보 수정
  3. ✅ 아이템 삭제
  4. ✅ 잠금해제 조건 설정 (8가지 타입)
  5. ✅ 아이템 목록 조회 및 필터링
  6. ✅ 통계 대시보드

  ---
  🚀 다음 단계 제안

  추가로 구현 가능한 기능들:
  1. 조건 자동 검증 - UnlockConditionService 구현하여 자동 잠금해제
  2. 업적 시스템 - ACHIEVEMENT 조건 타입 연동
  3. 알림 기능 - 아이템 잠금해제 시 알림
  4. 이미지 업로드 - 관리자가 직접 이미지 업로드
  5. 사용자 통계 - 각 아이템별 잠금해제 사용자 수